import pandas as pd

def run_scan(file_path):
    # 1. ÙØªØ­ Ù…Ù„Ù Ø§Ù„Ù€ CSV
    df = pd.read_csv(file_path)

    # 2. Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… (Ø§Ù„Ù…Ø§Ù„)
    total_cost = df['Cost'].sum()
    # Ù„Ù†ÙØªØ±Ø¶ Ø£Ù† Ø£ÙŠ Ø·Ù„Ø¨ ÙÙˆÙ‚ Ø§Ù„Ù€ 500 ØªÙˆÙƒÙ† Ù‡Ùˆ ØªØ¨Ø°ÙŠØ± (Ù…Ø«Ø§Ù„ Ø¨Ø³ÙŠØ·)
    waste_condition = df['Tokens'] > 500
    waste_percentage = (df[waste_condition]['Cost'].sum() / total_cost) * 100

    # 3. Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ø®Ø§Ø·Ø± (Security Risks)
    risky_keywords = ['password', 'hack', 'secret', 'key']
    risk_count = df['Prompt'].str.contains('|'.join(risky_keywords), case=False).sum()

    # 4. Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù†ØªÙŠØ¬Ø©
    print("-" * 30)
    print(f"ğŸ“Š SCAN RESULTS:")
    print("-" * 30)
    print(f"ğŸ’° Total Cost: ${total_cost:.4f}")
    print(f"ğŸ“‰ Potential Waste: {waste_percentage:.1f}%")
    print(f"âš ï¸ Security Risk Count: {risk_count} found")
    print("-" * 30)

if __name__ == "__main__":
    # ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù ÙŠØ·Ø§Ø¨Ù‚ Ù…Ù„Ù Ø§Ù„Ù€ CSV Ù„Ø¯ÙŠÙƒ
    run_scan('sample.csv')
